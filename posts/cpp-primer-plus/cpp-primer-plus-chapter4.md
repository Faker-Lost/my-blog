---
title: C++ Primer Plus å­¦ä¹ ç¬”è®° - ç¬¬4ç«  å¤åˆç±»å‹
date: 2026-02-11
excerpt: è¯¦è§£ C++ å¤åˆæ•°æ®ç±»å‹ï¼šæ•°ç»„ã€å­—ç¬¦ä¸²ã€ç»“æ„ä½“ã€å…±ç”¨ä½“ã€æšä¸¾ã€æŒ‡é’ˆä¸åŠ¨æ€å†…å­˜ç®¡ç†ï¼Œæ¶µç›–ç°ä»£ C++ æœ€ä½³å®è·µä¸å·¥ç¨‹é¿å‘æŒ‡å—ã€‚
tags:
  - C++
  - C++ Primer Plus
  - å­¦ä¹ ç¬”è®°
  - æ•™ç¨‹
series: C++ Primer Plus
seriesOrder: 5
---

## æœ¬ç« æ¦‚è§ˆ

**Why This Matters**: åŸºæœ¬ç±»å‹åªèƒ½å­˜å‚¨å•ä¸ªå€¼ã€‚ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†ä¸€ç»„æˆç»©ã€ä¸€æ®µæ–‡æœ¬ã€ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯â€¦â€¦è¿™äº›éƒ½éœ€è¦**å¤åˆç±»å‹**ã€‚æŒ‡é’ˆå’ŒåŠ¨æ€å†…å­˜æ›´æ˜¯ C++ åŒºåˆ«äº Java/Python çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œä¹Ÿæ˜¯é¢è¯•å¿…è€ƒé‡ç¾åŒºã€‚

**å‰ç½®çŸ¥è¯†**: å­¦ä¹ æœ¬ç« å‰ï¼Œå»ºè®®å…ˆæŒæ¡ç¬¬ 3 ç« çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ•´å‹ã€æµ®ç‚¹å‹ã€`const`ï¼‰ã€‚

**æ ¸å¿ƒç›®æ ‡**ï¼š

- æŒæ¡æ•°ç»„ã€å­—ç¬¦ä¸²ã€ç»“æ„ä½“ç­‰æ•°æ®å®¹å™¨çš„ä½¿ç”¨
- ç†è§£æŒ‡é’ˆçš„æœ¬è´¨â€”â€”å†…å­˜åœ°å€çš„ç›´æ¥æ“æ§
- å­¦ä¼šä½¿ç”¨ `new/delete` ç®¡ç†åŠ¨æ€å†…å­˜
- äº†è§£ç°ä»£ C++ ä¸­æ›´å®‰å…¨çš„æ›¿ä»£æ–¹æ¡ˆ

```text
å¤åˆç±»å‹çŸ¥è¯†ä½“ç³»ï¼š
â”œâ”€â”€ æ•°æ®å®¹å™¨
â”‚   â”œâ”€â”€ æ•°ç»„ (int arr[10])
â”‚   â”œâ”€â”€ å­—ç¬¦ä¸² (char[] / std::string)
â”‚   â”œâ”€â”€ ç»“æ„ä½“ (struct)
â”‚   â”œâ”€â”€ å…±ç”¨ä½“ (union)
â”‚   â””â”€â”€ æšä¸¾ (enum)
â”‚
â”œâ”€â”€ å†…å­˜æ“æ§
â”‚   â”œâ”€â”€ æŒ‡é’ˆ (int* p)
â”‚   â”œâ”€â”€ åŠ¨æ€å†…å­˜ (new / delete)
â”‚   â”œâ”€â”€ åŠ¨æ€æ•°ç»„ (new int[10])
â”‚   â””â”€â”€ åŠ¨æ€ç»“æ„ä½“ (new MyStruct)
â”‚
â””â”€â”€ å­˜å‚¨ç®¡ç†
    â”œâ”€â”€ è‡ªåŠ¨å­˜å‚¨ï¼ˆæ ˆï¼‰
    â”œâ”€â”€ é™æ€å­˜å‚¨
    â””â”€â”€ åŠ¨æ€å­˜å‚¨ï¼ˆå †ï¼‰
```

---

## ä¸€ã€åŸºç¡€çŸ¥è¯†è®²è§£ (Core Concepts)

### 1.1 æ•°ç»„ (Arrays)

æ•°ç»„æ˜¯ä¸€ç§å­˜å‚¨å¤šä¸ª**åŒç±»å‹**å€¼çš„æ•°æ®æ ¼å¼ã€‚

#### å£°æ˜ä¸åˆå§‹åŒ–

```cpp
// å®Œæ•´ç¤ºä¾‹ - å¯ç›´æ¥ç¼–è¯‘è¿è¡Œ
#include <iostream>
int main() {
    using namespace std;

    // å£°æ˜å¹¶åˆå§‹åŒ–
    int yams[3] = {7, 8, 6};

    // è®¿é—®å…ƒç´ ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰
    cout << "Total = " << yams[0] + yams[1] + yams[2] << endl;

    // âš ï¸ è¶Šç•Œè®¿é—®æ˜¯æœªå®šä¹‰è¡Œä¸ºï¼
    // yams[3] = 10; // DANGER!
    return 0;
}
```

> **æ³¨æ„**ï¼šæ•°ç»„å¤§å°å¿…é¡»æ˜¯**æ•´å‹å¸¸é‡**ï¼Œä¸èƒ½æ˜¯å˜é‡ã€‚åŠ¨æ€å¤§å°éœ€ç”¨ `new` æˆ– `std::vector`ã€‚

#### åˆå§‹åŒ–è§„åˆ™é€ŸæŸ¥

```cpp
int cards[4] = {3, 6, 8, 10};    // å®Œæ•´åˆå§‹åŒ–
long totals[500] = {0};          // å…¨éƒ¨åˆå§‹åŒ–ä¸º 0ï¼ˆæå¸¸ç”¨ï¼‰
short things[] = {1, 5, 3, 8};   // è‡ªåŠ¨æ¨æ–­ size=4

// C++11 åˆ—è¡¨åˆå§‹åŒ–
double earnings[4] {1.2e4, 1.6e4, 1.1e4, 1.7e4}; // çœç•¥ç­‰å·
unsigned int counts[10] {};      // ç©ºå¤§æ‹¬å· â†’ å…¨éƒ¨ä¸º 0
```

### 1.2 C é£æ ¼å­—ç¬¦ä¸²

C é£æ ¼å­—ç¬¦ä¸²æœ¬è´¨æ˜¯ä»¥**ç©ºå­—ç¬¦ (`\0`)** ç»“å°¾çš„ `char` æ•°ç»„ã€‚

```cpp
char dog[8] = {'b', 'e', 'a', 'u', 'x', ' ', 'I', 'I'}; // ä¸æ˜¯å­—ç¬¦ä¸²ï¼ç¼ºå°‘ \0
char cat[8] = {'f', 'a', 't', 'e', 's', 's', 'a', '\0'}; // æ˜¯å­—ç¬¦ä¸²

// æ›´ç®€æ´çš„å†™æ³•ï¼ˆè‡ªåŠ¨æ·»åŠ  \0ï¼‰
char bird[11] = "Mr. Cheeps";
char fish[] = "Bubbles";         // è‡ªåŠ¨è®¡ç®—å¤§å° = 8ï¼ˆå« \0ï¼‰
```

#### è¾“å…¥é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

`cin >>` é‡åˆ°ç©ºæ ¼å°±åœæ­¢ï¼Œæ— æ³•è¯»å–å®Œæ•´å¥å­ã€‚

| æ–¹æ³• | è¯­æ³• | ç‰¹ç‚¹ |
| :--- | :--- | :--- |
| `getline()` | `cin.getline(arr, size)` | è¯»å–å¹¶**ä¸¢å¼ƒ**æ¢è¡Œç¬¦ |
| `get()` | `cin.get(arr, size)` | è¯»å–å¹¶**ä¿ç•™**æ¢è¡Œç¬¦åœ¨ç¼“å†²åŒº |

```cpp
const int Size = 20;
char name[Size];
cin.getline(name, Size);  // è¯»å–æ•´è¡Œï¼ŒåŒ…æ‹¬ç©ºæ ¼
```

### 1.3 string ç±» (std::string)

`std::string` è®©å­—ç¬¦ä¸²æ“ä½œåƒç®€å•å˜é‡ä¸€æ ·å®¹æ˜“ã€‚éœ€åŒ…å« `<string>`ã€‚

```cpp
#include <string>
using namespace std;

string str1;                // ç©ºå­—ç¬¦ä¸²
string str2 = "panther";
string str3 = str1 + str2; // æ‹¼æ¥
str1 += " paste";          // è¿½åŠ 
int len = str1.size();     // è·å–é•¿åº¦

// è¾“å…¥æ•´è¡Œ
string line;
getline(cin, line);         // æ³¨æ„ï¼šä¸æ˜¯ cin.getline
```

### 1.4 æ··åˆè¾“å…¥å­—ç¬¦ä¸²å’Œæ•°å­—

æ•°å­—è¾“å…¥åæ®‹ç•™çš„æ¢è¡Œç¬¦ä¼šå¹²æ‰°åç»­çš„å­—ç¬¦ä¸²è¯»å–ã€‚

```cpp
int year;
cin >> year;    // æ¢è¡Œç¬¦æ®‹ç•™åœ¨ç¼“å†²åŒºï¼
cin.get();      // âœ… æ‰‹åŠ¨ä¸¢å¼ƒæ¢è¡Œç¬¦
// æˆ–åˆå¹¶å†™æ³•ï¼š
(cin >> year).get();

char address[80];
cin.getline(address, 80); // ç°åœ¨å¯ä»¥æ­£å¸¸è¯»å–äº†
```

### 1.5 ç»“æ„ä½“ (Structures)

ç»“æ„ä½“å¯ä»¥å­˜å‚¨å¤šä¸ª**ä¸åŒç±»å‹**çš„æ•°æ®ã€‚

```cpp
struct Inflatable {
    char name[20];
    float volume;
    double price;
};

int main() {
    Inflatable guest = {"Glorious Gloria", 1.88, 29.99};

    // ç”¨ . è®¿é—®æˆå‘˜
    cout << guest.name << ": $" << guest.price << endl;

    // ç»“æ„ä½“å…è®¸ç›´æ¥èµ‹å€¼ï¼ˆæ•°ç»„åšä¸åˆ°ï¼‰
    Inflatable choice;
    choice = guest; // âœ… æˆå‘˜é€ä¸ªå¤åˆ¶
    return 0;
}
```

### 1.6 å…±ç”¨ä½“ (Unions)

æ‰€æœ‰æˆå‘˜å…±äº«åŒä¸€å—å†…å­˜ï¼ŒåŒä¸€æ—¶é—´åªèƒ½å­˜å‚¨å…¶ä¸­ä¸€ç§ç±»å‹ã€‚

```cpp
union One4All {
    int int_val;
    long long_val;
    double double_val;
};

One4All pail;
pail.int_val = 15;        // å­˜ int
pail.double_val = 1.38;   // å­˜ doubleï¼Œæ­¤æ—¶ int_val çš„å€¼ä¸¢å¤±
```

**ç”¨é€”**ï¼šèŠ‚çœå†…å­˜ï¼ˆåµŒå…¥å¼ç³»ç»Ÿï¼‰æˆ–è§£æäºŒè¿›åˆ¶æ•°æ®æ ¼å¼ã€‚

### 1.7 æšä¸¾ (Enumerations)

`enum` åˆ›å»ºä¸€ç»„å‘½åçš„æ•´æ•°å¸¸é‡ã€‚

```cpp
enum Spectrum { Red, Orange, Yellow, Green, Blue, Violet };
// Red=0, Orange=1, Yellow=2 ...

Spectrum band = Blue;
int color = Blue;         // âœ… æšä¸¾å¯éšå¼è½¬ä¸º int
// band = 2000;           // âŒ ä¸èƒ½å°† int èµ‹ç»™æšä¸¾

// è‡ªå®šä¹‰å€¼
enum Bits { One = 1, Two = 2, Four = 4, Eight = 8 };
```

### 1.8 æŒ‡é’ˆ (Pointers)

æŒ‡é’ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå­˜å‚¨çš„å€¼æ˜¯**å†…å­˜åœ°å€**ã€‚

```cpp
int updates = 6;
int *p_updates = &updates; // & å–åœ°å€ï¼Œ* è§£å¼•ç”¨

cout << *p_updates;        // 6ï¼ˆé€šè¿‡æŒ‡é’ˆè¯»å–å€¼ï¼‰
*p_updates = 10;           // é€šè¿‡æŒ‡é’ˆä¿®æ”¹åŸå˜é‡
cout << updates;           // 10
```

> **é“å¾‹**ï¼šä½¿ç”¨ `*` ä¹‹å‰ï¼ŒæŒ‡é’ˆå¿…é¡»æŒ‡å‘ä¸€ä¸ªç¡®å®šçš„ã€åˆæ³•çš„åœ°å€ã€‚æœªåˆå§‹åŒ–çš„æŒ‡é’ˆæ˜¯å®šæ—¶ç‚¸å¼¹ã€‚

### 1.9 åŠ¨æ€å†…å­˜ (new / delete)

`new` åœ¨è¿è¡Œæ—¶ä»**å † (Heap)** åˆ†é…å†…å­˜ï¼Œ`delete` é‡Šæ”¾ã€‚

```cpp
// åˆ†é…å•ä¸ªå˜é‡
int *pn = new int;
*pn = 1001;
delete pn;

// åˆ†é…åŠ¨æ€æ•°ç»„
int *arr = new int[10];
arr[0] = 100;
delete [] arr;    // æ³¨æ„ï¼šæ•°ç»„ç”¨ delete[]
```

**new/delete å››æ¡é“å¾‹**ï¼š

1. ä¸è¦ `delete` é `new` åˆ†é…çš„å†…å­˜
2. ä¸è¦ `delete` åŒä¸€å—å†…å­˜ä¸¤æ¬¡
3. `new []` å¿…é¡»é…å¯¹ `delete []`
4. å¯¹ `nullptr` ä½¿ç”¨ `delete` æ˜¯å®‰å…¨çš„

### 1.10 åŠ¨æ€ç»“æ„ä½“

```cpp
Inflatable *ps = new Inflatable;

// æŒ‡é’ˆè®¿é—®æˆå‘˜ç”¨ç®­å¤´ ->
cin.get(ps->name, 20);
ps->price = 29.99;

delete ps;
```

> **å£è¯€**ï¼šå˜é‡ç”¨ç‚¹ (`.`)ï¼ŒæŒ‡é’ˆç”¨ç®­å¤´ (`->`)ã€‚

### 1.11 æŒ‡é’ˆç®—æœ¯

**æ•°ç»„åå°±æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€**ã€‚`pointer + 1` å¢åŠ  `sizeof(type)` ä¸ªå­—èŠ‚ã€‚

```cpp
double wages[3] = {10000.0, 20000.0, 30000.0};
double *pw = wages;

// ä»¥ä¸‹å››ç§å†™æ³•ç­‰ä»·ï¼š
wages[1]        // æ•°ç»„ä¸‹æ ‡
*(wages + 1)    // æ•°ç»„å + åç§»
pw[1]           // æŒ‡é’ˆä¸‹æ ‡
*(pw + 1)       // æŒ‡é’ˆ + åç§»
```

### 1.12 å­˜å‚¨ç±»å‹

| ç±»å‹ | å­˜å‚¨ä½ç½® | ç”Ÿå‘½å‘¨æœŸ | ç‰¹ç‚¹ |
| :--- | :--- | :--- | :--- |
| è‡ªåŠ¨å­˜å‚¨ | æ ˆ (Stack) | å‡½æ•°ç»“æŸè‡ªåŠ¨é”€æ¯ | æœ€å¸¸ç”¨ï¼ŒLIFO |
| é™æ€å­˜å‚¨ | æ•°æ®æ®µ | æ•´ä¸ªç¨‹åºç”Ÿå‘½å‘¨æœŸ | `static` æˆ–å…¨å±€å˜é‡ |
| åŠ¨æ€å­˜å‚¨ | å † (Heap) | æ‰‹åŠ¨ `delete` | æœ€çµæ´»ä¹Ÿæœ€å±é™© |

---

## äºŒã€è¿›é˜¶åº”ç”¨ (Modern C++ Practice)

### 2.1 ç”¨ `nullptr` ä»£æ›¿ `NULL`

```cpp
// ä¼ ç»Ÿå†™æ³• (C++98) - ä¸æ¨è
int *p = NULL;       // NULL æœ¬è´¨æ˜¯ 0ï¼Œå¯èƒ½å¯¼è‡´é‡è½½æ­§ä¹‰

// ç°ä»£å†™æ³• (C++11) - æ¨è
int *p = nullptr;    // ç±»å‹å®‰å…¨çš„ç©ºæŒ‡é’ˆ
```

### 2.2 ç”¨ `std::string` ä»£æ›¿ C é£æ ¼å­—ç¬¦ä¸²

```cpp
// ä¼ ç»Ÿ (å±é™©)              // ç°ä»£ (å®‰å…¨)
char s[20];                 string s;
strcpy(s, "hello");         s = "hello";        // è‡ªåŠ¨ç®¡ç†å†…å­˜
strcat(s, " world");        s += " world";      // ä¸ä¼šæº¢å‡º
int len = strlen(s);        int len = s.size(); // ç›´è§‰æ¥å£
```

### 2.3 ç”¨ `vector` å’Œ `array` ä»£æ›¿åŸç”Ÿæ•°ç»„

```cpp
#include <vector>
#include <array>

// vector: åŠ¨æ€å¤§å°ï¼Œå­˜å‚¨åœ¨å †ä¸Š
vector<int> vi;
vi.push_back(10);           // è‡ªåŠ¨æ‰©å®¹
vi.push_back(20);
cout << vi.at(0);           // at() ä¼šåšè¾¹ç•Œæ£€æŸ¥ï¼Œæ¯” [] å®‰å…¨

// array (C++11): å›ºå®šå¤§å°ï¼Œå­˜å‚¨åœ¨æ ˆä¸Šï¼Œæ¯”åŸç”Ÿæ•°ç»„æ›´å®‰å…¨
array<int, 5> ai = {1, 2, 3, 4, 5};
cout << ai.at(0);           // åŒæ ·æ”¯æŒè¾¹ç•Œæ£€æŸ¥
```

| ç±»å‹ | å¤§å° | å­˜å‚¨ | è¾¹ç•Œæ£€æŸ¥ | æ¨èåº¦ |
| :--- | :--- | :--- | :--- | :--- |
| `int a[10]` | å›ºå®š | æ ˆ | âŒ æ—  | â­ |
| `array<int,10>` | å›ºå®š | æ ˆ | âœ… `at()` | â­â­â­ |
| `vector<int>` | åŠ¨æ€ | å † | âœ… `at()` | â­â­â­â­ |

### 2.4 ç”¨ `enum class` ä»£æ›¿ä¼ ç»Ÿ `enum` (C++11)

```cpp
// ä¼ ç»Ÿ enum - ä¸å®‰å…¨ï¼ˆä¼šéšå¼è½¬ä¸º intï¼Œåå­—å¯èƒ½å†²çªï¼‰
enum Color { Red, Green, Blue };
int x = Red;    // âœ… éšå¼è½¬æ¢ï¼Œå¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„

// ç°ä»£ enum class - æ¨èï¼ˆå¼ºç±»å‹ï¼Œä¸ä¼šéšå¼è½¬æ¢ï¼‰
enum class Color { Red, Green, Blue };
// int x = Color::Red;         // âŒ ç¼–è¯‘é”™è¯¯ï¼Œæ›´å®‰å…¨
int x = static_cast<int>(Color::Red);  // âœ… å¿…é¡»æ˜¾å¼è½¬æ¢
Color c = Color::Red;                  // âœ… æ­£ç¡®ç”¨æ³•
```

---

## ä¸‰ã€å·¥ç¨‹é™·é˜±ä¸é¿å‘æŒ‡å— (Engineering Pitfalls)

ğŸš¨ æœ¬ç« æ¶‰åŠçš„çŸ¥è¯†ç‚¹æ˜¯å®é™…å·¥ç¨‹ä¸­ Bug çš„**é‡ç¾åŒº**ã€‚

### 3.1 ç¼“å†²åŒºæº¢å‡º (Buffer Overflow)

**ç°è±¡**ï¼šç¨‹åºå´©æºƒã€æ•°æ®é”™ä¹±ã€ç”šè‡³è¢«é»‘å®¢åˆ©ç”¨æ‰§è¡Œæ¶æ„ä»£ç ã€‚
**åŸå› **ï¼šC é£æ ¼å­—ç¬¦ä¸²å’ŒåŸç”Ÿæ•°ç»„**ä¸åšè¾¹ç•Œæ£€æŸ¥**ï¼Œå†™å…¥è¶…å‡ºé•¿åº¦çš„æ•°æ®ä¼šè¦†ç›–ç›¸é‚»å†…å­˜ã€‚

```cpp
char name[5];
strcpy(name, "Alexander"); // âŒ 11å­—èŠ‚å†™å…¥5å­—èŠ‚ç©ºé—´ï¼Œå†…å­˜è¢«ç ´åï¼
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

- ä¼˜å…ˆä½¿ç”¨ `std::string` å’Œ `std::vector`
- è‹¥å¿…é¡»ç”¨ C å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `strncpy(dest, src, size)` é™åˆ¶é•¿åº¦

### 3.2 å†…å­˜æ³„æ¼ (Memory Leak)

**ç°è±¡**ï¼šç¨‹åºè¿è¡Œè¶Šæ¥è¶Šæ…¢ï¼Œæœ€ç»ˆè€—å°½ç³»ç»Ÿå†…å­˜ã€‚
**åŸå› **ï¼š`new` åˆ†é…çš„å†…å­˜å¿˜è®° `delete`ã€‚

```cpp
void process() {
    int *data = new int[1000];
    // ... å¤„ç†æ•°æ® ...
    if (error) return;     // âŒ æå‰è¿”å›ï¼Œdata æ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ï¼
    delete [] data;
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

- å…»æˆ `new` å’Œ `delete` æˆå¯¹ä¹¦å†™çš„ä¹ æƒ¯
- ä½¿ç”¨ **RAII åŸåˆ™**ï¼ˆæ™ºèƒ½æŒ‡é’ˆ `std::unique_ptr`ï¼Œåç»­ç« èŠ‚è¯¦è§£ï¼‰

### 3.3 é‡æŒ‡é’ˆä¸æ‚¬ç©ºæŒ‡é’ˆ (Dangling Pointer)

**ç°è±¡**ï¼šéšæœºå´©æºƒã€æ•°æ®è¢«è«åç¯¡æ”¹ï¼ˆæœ€éš¾æ’æŸ¥çš„ Bug ç±»å‹ï¼‰ã€‚
**åŸå› **ï¼š`delete` åæŒ‡é’ˆæœªç½®ç©ºï¼Œæˆ–æŒ‡é’ˆæŒ‡å‘å·²é”€æ¯çš„æ ˆå˜é‡ã€‚

```cpp
int *p = new int(42);
delete p;
// p ä»ç„¶æŒ‡å‘å·²é‡Šæ”¾çš„åœ°å€ï¼
*p = 100;    // âŒ æœªå®šä¹‰è¡Œä¸ºï¼šå¯èƒ½å´©æºƒã€å¯èƒ½é™é»˜ç ´åæ•°æ®

// âœ… æ­£ç¡®åšæ³•
delete p;
p = nullptr; // ç«‹å³ç½®ç©º
```

### 3.4 ç»“æ„ä½“å¯¹é½ (Structure Padding)

**ç°è±¡**ï¼š`sizeof(struct)` å¤§äºæˆå‘˜å¤§å°ä¹‹å’Œï¼Œè·¨å¹³å°æ•°æ®ä¼ è¾“å‡ºé”™ã€‚
**åŸå› **ï¼šç¼–è¯‘å™¨ä¸º CPU è®¿é—®æ•ˆç‡è‡ªåŠ¨æ’å…¥å¡«å……å­—èŠ‚ã€‚

```cpp
struct Bad {
    char a;    // 1 å­—èŠ‚
    int b;     // 4 å­—èŠ‚
    char c;    // 1 å­—èŠ‚
};
// sizeof(Bad) = 12ï¼Œè€Œä¸æ˜¯ 6ï¼ï¼ˆç¼–è¯‘å™¨æ’å…¥äº†å¡«å……ï¼‰

struct Good {
    int b;     // 4 å­—èŠ‚
    char a;    // 1 å­—èŠ‚
    char c;    // 1 å­—èŠ‚
};
// sizeof(Good) = 8ï¼Œåˆç†æ’åˆ—æˆå‘˜å¯ä»¥å‡å°‘æµªè´¹
```

**è§£å†³æ–¹æ¡ˆ**ï¼šç½‘ç»œ/æ–‡ä»¶ä¼ è¾“æ—¶ä½¿ç”¨ `#pragma pack(1)` æˆ–æ‰‹åŠ¨åºåˆ—åŒ–ã€‚

---

## å››ã€é¢è¯•é«˜é¢‘è€ƒç‚¹ (Interview Focus)

### Q1: æ•°ç»„åå’ŒæŒ‡é’ˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**ç­”**ï¼š

- æ•°ç»„åæ˜¯**å¸¸é‡**ï¼Œä¸èƒ½ä¿®æ”¹æŒ‡å‘ï¼š`arr = arr + 1;` âŒ
- æŒ‡é’ˆæ˜¯**å˜é‡**ï¼Œå¯ä»¥ä¿®æ”¹æŒ‡å‘ï¼š`ptr = ptr + 1;` âœ…
- `sizeof(arr)` è¿”å›æ•´ä¸ªæ•°ç»„å¤§å°ï¼›`sizeof(ptr)` è¿”å›æŒ‡é’ˆè‡ªèº«å¤§å°ï¼ˆ4/8 å­—èŠ‚ï¼‰

### Q2: `new/delete` å’Œ `malloc/free` çš„åŒºåˆ«ï¼Ÿ

**ç­”**ï¼š

| ç‰¹æ€§ | `new/delete` | `malloc/free` |
| :--- | :--- | :--- |
| è¯­è¨€ | C++ è¿ç®—ç¬¦ | C åº“å‡½æ•° |
| ç±»å‹å®‰å…¨ | âœ… è‡ªåŠ¨æ¨æ–­ç±»å‹ | âŒ è¿”å› `void*`ï¼Œéœ€å¼ºè½¬ |
| æ„é€ /ææ„ | âœ… è°ƒç”¨æ„é€ /ææ„å‡½æ•° | âŒ ä¸è°ƒç”¨ |
| å¼‚å¸¸å¤„ç† | å¤±è´¥æŠ› `std::bad_alloc` | å¤±è´¥è¿”å› `NULL` |

### Q3: ä»€ä¹ˆæ˜¯ RAIIï¼Ÿä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ

**ç­”**ï¼šRAII (Resource Acquisition Is Initialization) æ˜¯ C++ çš„æ ¸å¿ƒèµ„æºç®¡ç†æ€æƒ³ï¼š**åœ¨æ„é€ å‡½æ•°ä¸­è·å–èµ„æºï¼Œåœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾èµ„æº**ã€‚è¿™æ ·å³ä½¿å‘ç”Ÿå¼‚å¸¸ï¼Œææ„å‡½æ•°ä¹Ÿä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œé¿å…èµ„æºæ³„æ¼ã€‚æ™ºèƒ½æŒ‡é’ˆ `unique_ptr`ã€`shared_ptr` å°±æ˜¯ RAII çš„å…¸å‹åº”ç”¨ã€‚

---

## äº”ã€æ€»ç»“ä¸å›é¡¾ (Summary & Review)

### æ ¸å¿ƒè®°å¿†ç‚¹

1. **æ•°ç»„**ï¼šå›ºå®šå¤§å°ï¼Œä¸‹æ ‡ä» 0 å¼€å§‹ï¼Œè¶Šç•Œè®¿é—®æ˜¯æœªå®šä¹‰è¡Œä¸º
2. **string vs char[]**ï¼šä¼˜å…ˆç”¨ `std::string`ï¼Œè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œä¸ä¼šæº¢å‡º
3. **ç»“æ„ä½“**ï¼šæ‰“åŒ…ä¸åŒç±»å‹æ•°æ®ï¼Œæ”¯æŒç›´æ¥èµ‹å€¼ï¼ˆæ•°ç»„ä¸è¡Œï¼‰
4. **æŒ‡é’ˆ**ï¼šå­˜å‚¨å†…å­˜åœ°å€ï¼Œç”¨ `&` å–åœ°å€ï¼Œç”¨ `*` è§£å¼•ç”¨
5. **new/delete**ï¼šå †å†…å­˜ç®¡ç†ï¼Œå¿…é¡»é…å¯¹ä½¿ç”¨ï¼Œ`new[]` é… `delete[]`
6. **æŒ‡é’ˆç®—æœ¯**ï¼š`+1` æ˜¯åŠ ä¸€ä¸ªå…ƒç´ çš„å¤§å°ï¼ˆ`sizeof(type)` å­—èŠ‚ï¼‰ï¼Œä¸æ˜¯ 1 å­—èŠ‚
7. **ç°ä»£æ›¿ä»£**ï¼š`vector` > `array` > åŸç”Ÿæ•°ç»„ï¼›`string` > `char[]`ï¼›`nullptr` > `NULL`

---

> **ä¸‹ä¸€ç« é¢„å‘Š**ï¼šç¬¬ 5 ç« å°†ä»‹ç»**å¾ªç¯å’Œå…³ç³»è¡¨è¾¾å¼** (`for`, `while`, `do while`)ï¼Œè®©æˆ‘ä»¬çš„æ•°æ®åŠ¨èµ·æ¥ï¼
